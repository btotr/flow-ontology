# baseURI: http://flow.recipes/ns/core
# imports: http://www.w3.org/2002/07/owl#
# prefix: flow

@prefix : <http://flow.recipes/ns/core#> .
@prefix flow: <http://flow.recipes/ns/core#> .
@prefix fs: <http://flow.recipes/ns/scheme#> .
@prefix metadata: <http://topbraid.org/metadata#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

<http://flow.recipes/ns/core>
  rdf:type owl:Ontology ;
  metadata:status metadata:UnderDevelopmentStatus ;
  rdfs:label "Flow recipes core ontology" ;
  owl:imports owl: ;
.
flow:Case
  rdf:type owl:Class ;
  rdfs:label "Case" ;
  rdfs:subClassOf owl:Thing ;
.
flow:Component
  rdf:type owl:Class ;
  rdfs:label "Component" ;
  rdfs:subClassOf owl:Thing ;
.
flow:ComponentUnit
  rdf:type owl:Class ;
  rdfs:subClassOf owl:Thing ;
.
flow:Ingredient
  rdf:type owl:Class ;
  rdfs:comment "an ingredient used for a particular instruction." ;
  rdfs:label "Ingredient"@en ;
  rdfs:subClassOf flow:Component ;
  owl:disjointWith flow:Method ;
  owl:equivalentClass [
      rdf:type owl:Class ;
      owl:equivalentClass flow:Ingredient ;
      owl:intersectionOf (
          skos:Concept
          [
            rdf:type owl:Restriction ;
            owl:hasValue fs:ingredientsScheme ;
            owl:onProperty skos:inScheme ;
          ]
        ) ;
    ] ;
.
flow:Instruction
  rdf:type owl:Class ;
  rdf:type sh:NodeShape ;
  rdfs:label "Instruction" ;
  rdfs:subClassOf owl:Thing ;
  rdfs:subClassOf [
      rdf:type owl:Restriction ;
      owl:minCardinality 1 ;
      owl:onProperty flow:hasMethod ;
    ] ;
  sh:property flow:Instruction-hasCase ;
  sh:property flow:Instruction-hasMethod ;
.
flow:Instruction-hasCase
  rdf:type sh:PropertyShape ;
  sh:path flow:hasCase ;
  rdfs:comment "either a Case could be used or an Instruction" ;
  sh:not [
      rdf:type sh:PropertyShape ;
      sh:path flow:hasInstruction ;
      sh:minCount 1 ;
    ] ;
.
flow:Instruction-hasMethod
  rdf:type sh:PropertyShape ;
  sh:path flow:hasMethod ;
  rdfs:comment "An Instruction must have a method" ;
  sh:maxCount 1 ;
  sh:minCount 1 ;
.
flow:Method
  rdf:type owl:Class ;
  rdfs:label "Method" ;
  rdfs:subClassOf owl:Thing ;
  owl:disjointWith flow:Ingredient ;
  owl:equivalentClass [
      rdf:type owl:Class ;
      owl:equivalentClass flow:Method ;
      owl:intersectionOf (
          skos:Concept
          [
            rdf:type owl:Restriction ;
            owl:hasValue fs:methodsScheme ;
            owl:onProperty skos:inScheme ;
          ]
        ) ;
    ] ;
.
flow:Recipe
  rdf:type owl:Class ;
  rdfs:comment "A recipe could stand on his own or act as an ingredient for another recipe." ;
  rdfs:label "Recipe" ;
  rdfs:subClassOf flow:Component ;
.
flow:componentAddition
  rdf:type owl:DatatypeProperty ;
  rdf:type owl:FunctionalProperty ;
  rdfs:domain flow:ComponentUnit ;
  rdfs:label "component addition" ;
  rdfs:range xsd:string ;
.
flow:directions
  rdf:type owl:DatatypeProperty ;
  rdf:type owl:FunctionalProperty ;
  rdfs:domain flow:Instruction ;
  rdfs:label "directions" ;
  rdfs:range xsd:string ;
.
flow:hasCase
  rdf:type owl:ObjectProperty ;
  rdfs:domain [
      rdf:type owl:Class ;
      owl:unionOf (
          flow:Case
          flow:Instruction
        ) ;
    ] ;
  rdfs:label "hasCase"@en ;
  rdfs:range flow:Case ;
.
flow:hasComponent
  rdf:type owl:ObjectProperty ;
  rdfs:domain flow:ComponentUnit ;
  rdfs:label "has component" ;
  rdfs:range flow:Component ;
.
flow:hasComponentUnit
  rdf:type owl:ObjectProperty ;
  rdfs:domain flow:Instruction ;
  rdfs:label "has component unit" ;
  rdfs:range flow:ComponentUnit ;
.
flow:hasInstruction
  rdf:type owl:ObjectProperty ;
  rdfs:domain [
      rdf:type owl:Class ;
      owl:unionOf (
          flow:Case
          flow:Instruction
          flow:Recipe
        ) ;
    ] ;
  rdfs:range flow:Instruction ;
.
flow:hasMethod
  rdf:type owl:FunctionalProperty ;
  rdf:type owl:ObjectProperty ;
  rdfs:domain flow:Instruction ;
  rdfs:label "hasMethod"@en ;
  rdfs:range flow:Method ;
.
flow:weight
  rdf:type owl:DatatypeProperty ;
  rdf:type owl:FunctionalProperty ;
  rdfs:domain flow:ComponentUnit ;
  rdfs:label "weight" ;
  rdfs:range xsd:integer ;
.
